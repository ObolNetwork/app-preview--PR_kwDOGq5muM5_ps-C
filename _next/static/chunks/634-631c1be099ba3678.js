"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{20479:function(e,t,a){a.d(t,{N:function(){return SectionTitle}});var s=a(85893);a(67294);var i=a(48900);let SectionTitle=e=>{let{children:t}=e;return(0,s.jsx)(i.kC,{direction:"column",children:(0,s.jsx)(i.xv,{variant:"h4",children:t})})}},62589:function(e,t,a){a.d(t,{d:function(){return ClusterDetailsContainer}});var s=a(85893),i=a(48900),l=a(24967),n=a(67294);let LVectorIcon=()=>(0,s.jsx)("svg",{width:"61",height:"47",viewBox:"0 0 61 47",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{id:"Vector 1",d:"M1 0V46H61",stroke:"#667A80"})});var r=a(42298);let DefaultOrderIcon=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83ZM12 18.17L8.82997 15L7.41997 16.41L12 21L16.59 16.41L15.17 15L12 18.17Z",fill:"#667A80"})}),ArrowDownIcon=()=>(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83Z",fill:"#E1E9EB"}),(0,s.jsx)("path",{d:"M8.82998 15L12 18.17L15.17 15L16.59 16.41L12 21L7.41998 16.41L8.82998 15Z",fill:"#667A80"})]}),ArrowUpIcon=()=>(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M12 5.83L15.17 9L16.58 7.59L12 3L7.40997 7.59L8.82997 9L12 5.83Z",fill:"#667A80"}),(0,s.jsx)("path",{d:"M8.82998 15L12 18.17L15.17 15L16.59 16.41L12 21L7.41998 16.41L8.82998 15Z",fill:"#E1E9EB"})]}),o=(0,i.zo)("th",{width:"190px",textTransform:"none",pb:"$xs",height:"24px",variants:{sortable:{true:{"&:hover":{cursor:"pointer"}}}}}),InnerValidatorTh=e=>{let{sortable:t,requestSort:a,column:l,css:n,sortConfig:r,sortedColumnAccessor:d}=e;return(0,s.jsx)(o,{onClick:t?()=>a(l.accessorKey):void 0,css:n,sortable:t,children:(0,s.jsxs)(i.xu,{css:{display:"flex",color:"#667A80",fontFamily:"DM Sans",fontSize:"16px",fontWeight:"700",lineHeight:"24px",textAlign:"left"},children:[l.header,t&&r&&d===l.accessorKey?"asc"===r[l.accessorKey]?(0,s.jsx)(ArrowUpIcon,{}):(0,s.jsx)(ArrowDownIcon,{}):t?(0,s.jsx)(DefaultOrderIcon,{}):null]})})},d=(0,i.zo)("table",{borderCollapse:"collapse",borderStyle:"hidden",boxShadow:"none",width:"100%",tableLayout:"fixed","& thead":{color:"$body",fontWeight:"$bold",fontSize:"$3"},"& tr":{color:"$textLighter"}}),c=(0,i.zo)("thead",{borderRadius:0}),u=(0,i.zo)("td",{width:"190px",py:"$xs",fontSize:"$4"}),h=(0,i.zo)("tr",{mb:"$lg"}),InnerValidatorsTable=e=>{let{rows:t,columns:a,initialSorting:i="asc"}=e,[l,o]=(0,n.useState)({}),[x,p]=(0,n.useState)(t),[f,g]=(0,n.useState)("");(0,n.useEffect)(()=>{p(t)},[t]);let sortRows=(e,t)=>{let s=[...x],i=a.find(t=>t.accessorKey===e),l=null==i?void 0:i.sortAccessor;return s.sort((a,s)=>{let n=a[e],o=s[e];if(l&&(n=l(a),o=l(s)),(null==i?void 0:i.sortLevel)!=="single"&&(null==i?void 0:i.sortLevel)){if((null==i?void 0:i.sortLevel)==="multi"&&n.firstLevel===o.firstLevel){let a=(0,r.kd)(n[e],o[e],t);if(0!=a)return a}}else{let e=(0,r.kd)(n,o,t);if(0!=e)return e}return 0}),s},requestSort=e=>{let t=i;l&&"asc"===l[e]&&(t="desc");let a=sortRows(e,t);p(a),g(e),o(a=>({...a,[e]:t}))};return(0,s.jsxs)(d,{className:"table-tabs-header",children:[(0,s.jsx)(c,{children:(0,s.jsx)(h,{children:a.map((e,t)=>{let{css:i,sortable:n,...r}=e;return(0,s.jsx)(InnerValidatorTh,{sortable:n,requestSort:requestSort,column:r,css:{...i,paddingLeft:t===a.length-1?"40px":"0px"},sortConfig:l,sortedColumnAccessor:f},"inner-table-validator-".concat(t))})})}),(0,s.jsx)("tbody",{children:x.map((e,t)=>(0,s.jsx)(h,{children:a.map((t,i)=>(0,s.jsx)(u,{css:{paddingLeft:i===a.length-1?"40px":"0px",color:0===e[t.accessorKey]?"#667A80":"auto"},children:"effectiveness"===t.accessorKey?e[t.accessorKey]+"%":e[t.accessorKey]},"inner-table-validator-cell ".concat(i)))},"inner-table-validator-row ".concat(t)))})]})},x=[{accessorKey:"address",header:"Validators"},{accessorKey:"status",header:"Status",sortable:!0,sortAccessor:e=>{var t;return n.isValidElement(e.status)?(0,r.$s)((null===(t=e.status)||void 0===t?void 0:t.props).status):void 0},sortLevel:"single"},{accessorKey:"effectiveness",header:"Effectiveness",sortable:!0,sortAccessor:e=>{var t;return{firstLevel:n.isValidElement(e.status)?(0,r.$s)((null===(t=e.status)||void 0===t?void 0:t.props).status):void 0,effectiveness:Number((0,r.IN)(e.effectiveness||0))}},sortLevel:"multi"}],ExpandableSection=e=>{let{rowValidators:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.xu,{css:{overflowY:"auto",overflowX:"hidden",display:"flex",scrollbarWidth:"none",gap:"$sm",position:"absolute",top:0,height:"100%"},children:[(0,s.jsx)(i.xu,{css:{marginLeft:"36px",position:"relative"},children:(0,s.jsx)(LVectorIcon,{})}),(0,s.jsx)(i.xu,{css:{width:"551px",maxHeight:"312px",position:"relative",top:"$xl"},children:(0,s.jsx)(InnerValidatorsTable,{columns:x,rows:null==t?void 0:t.map(e=>({address:(0,s.jsx)(l.Os,{address:e.address}),status:e.status||"Pending",effectiveness:e.effectiveness||0}))})})]}),(0,s.jsx)(l.mT,{background:"linear-gradient(180deg, rgba(14, 24, 26, 0) 0%, #0E181A 100%)",width:"100%",height:"54px"})]})},CollapsedRowIcon=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7 9.5L12 14.5L17 9.5H7Z",fill:"#E1E9EB"})}),ExpandedRowIcon=()=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7 14.5L12 9.5L17 14.5H7Z",fill:"#E1E9EB"})});var p=a(92321),f=a(86105);let fetchValidatorsStatusMetrics=e=>{let t=0,a=0,s=0,i=0;return e.forEach(e=>{if(n.isValidElement(e.status)){var l,r,o,d;f.kC[(null===(l=e.status)||void 0===l?void 0:l.props).status]&&t++,f.av[(null===(r=e.status)||void 0===r?void 0:r.props).status]&&a++,f.CE[(null===(o=e.status)||void 0===o?void 0:o.props).status]&&s++,f.w5[(null===(d=e.status)||void 0===d?void 0:d.props).status]&&i++}}),{activeValidatorsCount:t,withdrawalPossibleCount:a,exitedValidatorsCount:s,exitingValidatorsCount:i}},formatValidatorsRewardsTable=e=>{let t=new Map,a=[];return e.forEach((e,a)=>{let s="".concat(e.withdrawalAddress,"-").concat(e.feeRecipient);t.has(s)||t.set(s,{withdrawalAddress:e.withdrawalAddress,feeRecipient:e.feeRecipient,index:a,validators:[]}),t.get(s).validators.push({address:e.address,status:e.status,effectiveness:e.effectiveness})}),t.forEach(e=>{a[e.index]={withdrawalAddress:e.withdrawalAddress,feeRecipient:e.feeRecipient,count:e.validators.length,validators:e.validators}}),{groupedWithdrawalConfigArray:a}},isConnectedAddressARecipientOrPrincipal=(e,t)=>e.some(e=>{var a;return(null==e?void 0:e.isPrincipalConnected)||(null==e?void 0:null===(a=e.accounts)||void 0===a?void 0:a.includes(t))}),duplicateSplittersData=(e,t)=>Object.values(e.reduce((e,a)=>{if(a){let{feeRecipientAddress:s,feeRecipientBalance:i,percentAllocations:l,accounts:n,userBalance:r}=a;if(r){let a=null==n?void 0:n.findIndex(e=>e===t),r=-1!==a?l[a]:null;e[s]?e[s].count+=1:e[s]={count:1,feeRecipientBalance:i,feeRecipientAddress:s,percentage:r}}}return e},{}));var g=a(1958),m=a(64529);let v=(0,m.Ue)(e=>({validatorsClaimInfo:[],unclaimedRewardsWarningFlag:!1,isAnyValidatorPendingActivation:!1,groupedWithdrawalConfigArray:[],userSplitMainBalance:0,claimTXHash:"",updateValidatorsClaimInfo:(t,a)=>e(e=>{let s=e.validatorsClaimInfo,i=[...s];return i[t]=a,{validatorsClaimInfo:i}}),updateUnclaimedRewardsWarningFlag:t=>e(()=>({unclaimedRewardsWarningFlag:t})),updateGroupedWithdrawalConfigArray:t=>e(()=>({groupedWithdrawalConfigArray:t})),updateIsAnyValidatorPendingActivation:t=>e(()=>({isAnyValidatorPendingActivation:t})),updateUserSplitMainBalance:t=>e(()=>({userSplitMainBalance:t})),updateClaimTXHash:t=>e(()=>({claimTXHash:t}))}));var w=a(76344),j=a(71852),b=a(37122),y=a(3601),C=a(15229),L=a(48497),S=a(81794),A=a(39625),T=a(37003);async function getOWRMetadata(e,t){let[a,s,i]=await (0,T.L)(t,{abi:S.i.abi,address:e,functionName:"getTranches"}),l=await (0,T.L)(t,{abi:S.i.abi,address:e,functionName:"fundsPendingWithdrawal"}),n=await (0,T.L)(t,{abi:S.i.abi,address:e,functionName:"claimedPrincipalFunds"}),r=parseFloat((0,A.d)(l)),o=parseFloat((0,A.d)(n)),d={principalRecipient:a,rewardRecipient:s,amountOfPrincipalStake:parseFloat((0,A.d)(i)),claimedPrincipalFunds:o,fundsPendingWithdrawal:r};return d}let claim=async e=>{let{validatorsClaimInfo:t,connectedAddress:a,config:s}=e;try{let e=await (0,L.oZ)({validatorsClaimInfo:t,connectedAddress:a,config:s});return{loading:!1,txHash:e,completed:!0,errorMessage:null}}catch(e){return{loading:!1,errorMessage:e.message,txHash:null,completed:null}}},distribute=async e=>{let{validatorsClaimInfo:t,config:a}=e;try{let e=await (0,L.Sw)({validatorsClaimInfo:t,config:a});return{loading:!1,txDistributeHash:e,completed:!0,errorMessage:null}}catch(e){return{loading:!1,errorMessage:e.message,txDistributeHash:null,completed:null}}},getUserBalance=async e=>{let{splitter:t,userAddress:a,withdrawalBalance:s,owrAddressOrSplitter:i,config:l}=e,n="0",r=0,o=!1;if(a&&t.accounts&&t.percentAllocations){if(i===t.split){let e=await (0,L.vs)(a,t,l);n=Number(e).toString()}else{let e=await getOWRMetadata(i,l),d=await (0,L.y2)(a,i,t,l);if(Number(s)>=16&&e.principalRecipient===a){o=!0,r=e.amountOfPrincipalStake;let t=Math.max(0,e.amountOfPrincipalStake-e.claimedPrincipalFunds),a=Math.max(0,Number(s)-e.fundsPendingWithdrawal);n=(Number(d)+Math.min(t,a)).toString()}else n=Number(d).toString()}}return{balance:n,isPrincipal:o,amountOfPrincipalStake:r}},useClusterValidators=e=>{let{validators:t}=e,a=v(e=>e.updateGroupedWithdrawalConfigArray),s=(0,n.useMemo)(()=>{let e=[...t];e.sort((e,t)=>{if(n.isValidElement(e.status)&&n.isValidElement(t.status)){var a,s;let i=(0,r.$s)((null===(a=e.status)||void 0===a?void 0:a.props).status),l=(0,r.$s)((null===(s=t.status)||void 0===s?void 0:s.props).status);if(i<l)return 1;if(i>l)return -1;let n=(0,r.IN)(e.effectiveness),o=(0,r.IN)(t.effectiveness);return Number(o)-Number(n)}});let{groupedWithdrawalConfigArray:a}=formatValidatorsRewardsTable(e);return a},[t]);(0,n.useEffect)(()=>{s&&a(s)},[s,a])},useTotalClaimBalance=e=>{let{address:t}=(0,p.m)(),a=v(e=>e.userSplitMainBalance),s=v(e=>e.validatorsClaimInfo);if(e){let e=(null==s?void 0:s.reduce((e,t)=>e+((null==t?void 0:t.userBalance)||0),0))+a,i=duplicateSplittersData(s,t),l=i.reduce((e,t)=>e+t.feeRecipientBalance*(.01*t.percentage)*(t.count-1),0);return{totalBalanceWithoutDuplicate:e-l}}return{totalBalanceWithoutDuplicate:0}},useTotalDistributeBalance=e=>{let{address:t}=(0,p.m)(),a=v(e=>e.validatorsClaimInfo);if(!e){let e=null==a?void 0:a.reduce((e,t)=>(null==t?void 0:t.feeRecipientAddress)!==(null==t?void 0:t.withdrawalAddress)?e+((null==t?void 0:t.feeRecipientBalance)+(null==t?void 0:t.withdrawalBalance)||0):e+((null==t?void 0:t.feeRecipientBalance)||0),0),s=duplicateSplittersData(a,t),i=s.reduce((e,t)=>e+t.feeRecipientBalance*(t.count-1),0);return{totalContractsBalanceWithoutDuplicate:e-i}}return{totalContractsBalanceWithoutDuplicate:0}},useValidatorSplitterBalance=e=>{var t,a;let{rowConfig:s,rowIndex:i}=e,{address:l}=(0,p.m)(),r=v(e=>e.updateValidatorsClaimInfo),o=v(e=>e.updateUnclaimedRewardsWarningFlag),{activeValidatorsCount:d,withdrawalPossibleCount:c,exitedValidatorsCount:u,exitingValidatorsCount:h}=fetchValidatorsStatusMetrics(s.validators),x=Number(null===(a=(0,w.bv)(f.Kc,l).userEarnings)||void 0===a?void 0:null===(t=a.activeBalances[g.D])||void 0===t?void 0:t.formattedAmount)||0,m=v(e=>e.updateUserSplitMainBalance);(0,n.useEffect)(()=>{m(x)},[x,m]);let{isVerifiedSplitter:L}=(0,j.Z)(s.feeRecipient,s.withdrawalAddress,32*s.validators.length),{splitMetadata:S}=(0,w.rl)(f.Kc,s.feeRecipient),A=null==S?void 0:S.recipients.map(e=>e.recipient.address),T=null==S?void 0:S.recipients.map(e=>Number(e.ownership));console.log("splitMetadata in",s.feeRecipient,S);let E={accounts:A,percentAllocations:T,distributorFee:(null==S?void 0:S.distributorFeePercent)||f.Uu,split:null==S?void 0:S.address,controller:(null==S?void 0:S.controller)||g.D},{balance:$,withdrawalBalance:B,feeRecipientBalance:R,owrPrincipalAmount:V,isPrincipalConnected:I}=function(e,t,a,s){let i=(0,b.Z)(),[l,r]=(0,n.useState)("0"),[o,d]=(0,n.useState)(0),[c,u]=(0,n.useState)(null),[h,x]=(0,n.useState)(!1),f=v(e=>e.claimTXHash),{chainId:g}=(0,p.m)(),{data:m}=(0,y.K)({address:a}),{data:w}=(0,y.K)({address:null==t?void 0:t.split}),j=s&&(null==t?void 0:t.split)&&m?(0,C.b)(m.value,m.decimals):"0",L=s&&(null==t?void 0:t.split)&&w?(0,C.b)(w.value,w.decimals):"0";return(0,n.useEffect)(()=>{f&&r("0")},[f]),(0,n.useEffect)(()=>{u(null);let fetchBalance=async()=>{try{let{balance:s,isPrincipal:l,amountOfPrincipalStake:n}=await getUserBalance({splitter:t,userAddress:e,withdrawalBalance:j,owrAddressOrSplitter:a,chainId:g,config:i});r(s),d(n),x(l)}catch(e){x(!1),u(e)}};a&&(null==t?void 0:t.accounts)&&s&&fetchBalance()},[e,a,t.split,s,g,j,t,i]),{balance:l,withdrawalBalance:j,feeRecipientBalance:L,isPrincipalConnected:h,owrPrincipalAmount:o,error:c}}(l,E,s.withdrawalAddress,L),k=Math.max(0,Number($)-x);return(0,n.useEffect)(()=>{if(L&&s){let e={withdrawalAddress:s.withdrawalAddress,feeRecipientAddress:s.feeRecipient,withdrawalBalance:Number(B),feeRecipientBalance:Number(R),userBalance:k,accounts:A,percentAllocations:T,distributorFee:E.distributorFee,controller:E.controller,isPrincipalConnected:I};r(i,e)}},[L,i,s,B,k,R,A,T,r,E.distributorFee,E.controller,I]),(0,n.useEffect)(()=>{s.withdrawalAddress!==s.feeRecipient&&h>0&&V>(d+c+u)*32&&o(!0)},[s,h,V,d,c,u,o]),{validatorUserBalance:k}},E=(0,i.zo)("td",{py:"$sm",px:"$lg",color:"$body",fontSize:"$4",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",variants:{size:{sm:{width:"$3xl"}},textCenter:{true:{textAlign:"center"}}}}),$=(0,i.zo)("tr",{background:"#0E181A",height:"310px"}),ValidatorsTableTwoRowLayout=e=>{let{rowConfig:t,rowIndex:a,rowsLength:o}=e,{address:d}=(0,p.m)(),[c,u]=(0,n.useState)(!1),{validatorUserBalance:h}=useValidatorSplitterBalance({rowConfig:t,rowIndex:a}),handleToggle=()=>{u(!c)},x={withdrawalAddress:(0,r.VC)(d,t.withdrawalAddress)?(0,s.jsx)(l.Ze,{address:t.withdrawalAddress}):(0,s.jsx)(l.Ns,{address:t.withdrawalAddress}),feeRecipient:(0,r.VC)(d,t.feeRecipient)?(0,s.jsx)(l.Ze,{address:t.feeRecipient}):(0,s.jsx)(l.Ns,{address:t.feeRecipient}),validators:t.count,claimable:(h.toFixed(2)||0)+" ETH"};return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(V,{css:{borderBottom:a==o-1?"none":"2px solid $bg03","&:hover":{cursor:"pointer"}},onClick:()=>handleToggle(),children:D.map((e,t)=>(0,s.jsx)(E,{css:{color:"$light",textAlign:"left"},children:0===t?(0,s.jsxs)(i.kC,{css:{alignItems:"center"},children:[" ",c?(0,s.jsx)(ExpandedRowIcon,{}):(0,s.jsx)(CollapsedRowIcon,{})," ",(0,s.jsx)(i.xu,{children:x[e.accessorKey]})," "]}):x[e.accessorKey]},"outer-table-cell-".concat(t)))}),c&&(0,s.jsx)($,{children:(0,s.jsx)("td",{colSpan:null==D?void 0:D.length,style:{position:"relative"},children:(0,s.jsx)(ExpandableSection,{rowValidators:t.validators})})})]},"outer-table-reactFragment-".concat(a))},B=(0,i.zo)("table",{borderCollapse:"collapse",width:"100%",boxShadow:"none",display:"table",tableLayout:"fixed","> thead":{color:"$body",textTransform:"uppercase",fontSize:"$3"},"& tr":{color:"$textLighter"}}),R=(0,i.zo)("th",{py:"$sm",px:"$lg",color:"$body",fontWeight:"500",fontSize:"$3",backgroundColor:"$bg03"}),V=(0,i.zo)("tr",{height:"54px"}),ValidatorsTable=()=>{let e=v(e=>e.groupedWithdrawalConfigArray);return(0,s.jsxs)(B,{className:"table-tabs-header",children:[(0,s.jsx)("thead",{children:(0,s.jsx)(V,{children:D.map((e,t)=>{let{css:a,sortable:i,...l}=e;return(0,s.jsx)(R,{css:{...a,textAlign:"left"},children:l.header},"outer-table-header-".concat(t))})})}),(0,s.jsx)("tbody",{children:e.map((t,a)=>(0,s.jsx)(ValidatorsTableTwoRowLayout,{rowConfig:t,rowIndex:a,rowsLength:e.length},"outer-table-reactFragment-".concat(a)))})]})},TransactionButton=e=>{let{onClick:t,buttonText:a,css:n,status:r,disabled:o}=e;return(0,s.jsx)(l.fl,{variant:(null==r?void 0:r.loading)?"tx":void 0,color:"primary",type:"button",css:n,disabled:o,onClick:t,children:(null==r?void 0:r.loading)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.yC,{}),"Transaction in progress"]}):(0,s.jsxs)(s.Fragment,{children:[" ",a]})})},ClaimableAmountIcon=()=>(0,s.jsxs)("svg",{width:"18",height:"28",viewBox:"0 0 18 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{opacity:"0.6",children:(0,s.jsx)("path",{opacity:"0.6",d:"M8.93714 10.3503L0 14.2596L8.93714 19.338L17.8708 14.2596L8.93714 10.3503Z",fill:"#D9EEF3"})}),(0,s.jsx)("g",{opacity:"0.45",children:(0,s.jsx)("path",{opacity:"0.45",d:"M0 14.2623L8.93714 19.3407V0.000183105L0 14.2623Z",fill:"#D9EEF3"})}),(0,s.jsx)("g",{opacity:"0.8",children:(0,s.jsx)("path",{opacity:"0.8",d:"M8.94116 0.000183105V19.3407L17.8748 14.2623L8.94116 0.000183105Z",fill:"#D9EEF3"})}),(0,s.jsx)("g",{opacity:"0.45",children:(0,s.jsx)("path",{opacity:"0.45",d:"M0 15.89L8.93714 27.9998V20.9684L0 15.89Z",fill:"#D9EEF3"})}),(0,s.jsx)("g",{opacity:"0.8",children:(0,s.jsx)("path",{opacity:"0.8",d:"M8.94116 20.9684V27.9998L17.8818 15.89L8.94116 20.9684Z",fill:"#D9EEF3"})})]}),CTA=e=>{let{status:t,txHash:a,amount:l,onClick:n,btnText:r,tooltipText:o}=e;return(0,s.jsx)(i.xu,{css:{alignContent:"center"},children:(null==t?void 0:t.completed)?(0,s.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"".concat(f.jX,"/tx/").concat(a),children:["View on Ethererscan",(0,s.jsx)(i._j,{color:"white",size:"sm"})]}):(0,s.jsxs)(i.kC,{css:{gap:"$lg",alignItems:"center"},children:[(0,s.jsxs)(i.kC,{css:{gap:"$xs",width:"fit-content"},children:[(0,s.jsx)(ClaimableAmountIcon,{}),(0,s.jsx)(i.xv,{css:{fontFamily:"DM Sans",fontSize:"$8",fontWeight:"$bold",lineHeight:"32px",textAlign:"left"},children:l})]}),(0,s.jsx)(i.KZ,{side:"top",content:o,children:(0,s.jsx)(i.xu,{css:{display:"flex"},children:(0,s.jsx)(TransactionButton,{status:t,css:{minWidth:"120px"},disabled:!l,onClick:n,buttonText:r})})})]})})},ValidatorsTableButtons=()=>{let e=(0,b.Z)(),{address:t}=(0,p.m)(),a=v(e=>e.validatorsClaimInfo),r=isConnectedAddressARecipientOrPrincipal(a,t),[o,d]=(0,n.useState)(),[c,u]=(0,n.useState)(""),h=v(e=>e.updateClaimTXHash),x=v(e=>e.updateUserSplitMainBalance),{totalBalanceWithoutDuplicate:f}=useTotalClaimBalance(r),g=(0,n.useCallback)(async()=>{var s;d(e=>({...e,loading:!0}));let i=await claim({validatorsClaimInfo:a,connectedAddress:t,config:e}),l="string"==typeof i.txHash?i.txHash:null===(s=i.txHash)||void 0===s?void 0:s.transactionHash;d({loading:!1,...i}),l&&(h(l),u(l),x(0))},[a,t,h,x,e]),[m,w]=(0,n.useState)(),[j,y]=(0,n.useState)(""),{totalContractsBalanceWithoutDuplicate:C}=useTotalDistributeBalance(r),L=(0,n.useCallback)(async()=>{var t;w(e=>({...e,loading:!0}));let s=await distribute({validatorsClaimInfo:a,config:e}),i="string"==typeof s.txDistributeHash?s.txDistributeHash:null===(t=s.txDistributeHash)||void 0===t?void 0:t.transactionHash;w({loading:!1,...s}),i&&y(i)},[a,e]);return null==f||Number.isNaN(f)?null:(0,s.jsxs)(i.kC,{css:{justifyContent:"flex-end",gap:"$md",justifyItems:"center"},children:[r&&(0,s.jsx)(l.TT,{name:"showClaimSection",children:(0,s.jsx)(CTA,{status:o,amount:f,onClick:g,txHash:c,btnText:"Claim All",tooltipText:"Contracts balance will be distributed to the split main, if available, and then user balance will be claimed."})}),!r&&(0,s.jsx)(l.TT,{name:"showDistributeSection",children:(0,s.jsx)(CTA,{status:m,amount:C,onClick:L,txHash:j,btnText:"Distribute All",tooltipText:"Contracts balance will be distributed to the split main."})})]})},I={padding:"0 83px 0 24px",height:"56px",display:"flex",flexDirection:"row",justifyContent:"space-between"},SplitMainBalance=()=>{let e=v(e=>e.userSplitMainBalance),{address:t}=(0,p.m)(),a=v(e=>e.validatorsClaimInfo),l=isConnectedAddressARecipientOrPrincipal(a,t);return l?(0,s.jsxs)(i.W2,{css:I,children:[(0,s.jsxs)(i.xu,{css:{alignItems:"center",gap:"$xxxs",display:"flex",fontWeight:"$medium",fontSize:"$4",color:"#97B2B8"},children:["splitMain user balance",(0,s.jsx)(i.KZ,{content:"claimable ETH from the split main",children:(0,s.jsx)(i.xu,{css:{display:"flex"},children:(0,s.jsx)(i.by,{})})})]}),(0,s.jsxs)(i.xu,{css:{alignItems:"center",gap:"$xxxs",display:"flex",fontWeight:"$normal",fontSize:"$2",color:"#97B2B8"},children:["Balance available in splitMain:",(0,s.jsx)(i.xv,{css:{fontSize:"$4",fontWeight:"$bold",lineHeight:"24px"},children:e+" ETH"})]})]}):null},LabelWithTooltip=e=>{let{heading:t,content:a}=e;return(0,s.jsxs)(i.xu,{css:{alignItems:"center",gap:"$xxxs",display:"flex"},children:[t,(0,s.jsx)(i.KZ,{content:a,children:(0,s.jsx)(i.xu,{css:{display:"flex"},children:(0,s.jsx)(i.by,{})})})]})},k=(0,i.zo)(i.xu,{fontFamily:"inherit",display:"flex",alignItems:"center",color:"$light",justifyContent:"center",fontWeight:"$semibold",fontSize:"$8",lineHeight:"24px",flexShrink:0,gap:"$xl"}),M=(0,i.zo)(i.xu,{flexGrow:1}),W=[{accessorKey:"withdrawalAddress",header:(0,s.jsx)(LabelWithTooltip,{heading:"Withdrawal Address",content:"Address to receive skimming rewards and validator principal at exit."})},{accessorKey:"feeRecipient",header:(0,s.jsx)(LabelWithTooltip,{heading:"Fee Recipient",content:"Address to receive transaction fees from block proposals."})},{accessorKey:"validators",header:"Validators"}];(0,l.cr)("showClaimSection")&&W.push({accessorKey:"claimable",header:(0,s.jsx)(LabelWithTooltip,{heading:"Claimable",content:"Amount of claimable ETH  from the validator split."})});let D=W,ValidatorsTableWrapper=()=>{let e=v(e=>e.unclaimedRewardsWarningFlag);return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(i.sQ,{heading:"There are unclaimed rewards that should be claimed before the exit completes."}),(0,s.jsx)(l.g_,{css:{overflowY:"hidden",".table-container":{"@sm":{width:"900px"}}},children:(0,s.jsxs)(i.W2,{layout:"column",alignItems:"start",className:"table-container",css:{padding:0,gap:0},children:[(0,s.jsxs)(i.kC,{css:{justifyContent:"space-between",alignItems:"center",padding:"$lg"},children:[(0,s.jsx)(k,{className:"container-heading",children:"Validators rewards"}),(0,s.jsx)(ValidatorsTableButtons,{})]}),(0,s.jsx)(M,{className:"validators-table-container",children:(0,s.jsx)(ValidatorsTable,{})})]})}),(0,s.jsx)(l.TT,{name:"showClaimSection",children:(0,s.jsx)(SplitMainBalance,{})})]})};var F=a(42483),N=a(11163),H=a.n(N);let ExitButton=e=>{let{disabled:t,onClick:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.xv,{variant:"body",children:"Exit all validators in this cluster."}),(0,s.jsx)(i.xv,{variant:"body",children:"This cluster will no longer earn rewards."}),(0,s.jsx)(i.xv,{variant:"body",children:"Upon exiting the cluster you will be able to withdraw the original principal & claim all rewards."}),(0,s.jsx)(i.zx,{color:"primary",type:"button",css:{width:"auto"},disabled:t,onClick:a,children:"Exit Cluster"})]})},TransactionSection=e=>{let{icon:t,heading:a,children:l}=e;return(0,s.jsxs)(i.mh,{children:[(0,s.jsxs)(i.xu,{children:["successfully"===t&&(0,s.jsx)(i.nQ,{}),"loading"===t&&(0,s.jsx)(i.ZG,{}),"exiting"===t&&(0,s.jsx)(i.lR,{})]}),(0,s.jsx)(i.xu,{css:{display:"flex",fd:"column",gap:"$sm"},children:(0,s.jsxs)(i.xu,{css:{display:"flex",fd:"column",gap:"$xs"},children:[(0,s.jsx)(i.xv,{variant:"body",css:{color:"white"},children:a}),l]})})]})},ExitLoading=e=>{let{txHash:t}=e;return(0,s.jsxs)(TransactionSection,{icon:"exiting",heading:"Cluster is exiting",children:[(0,s.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"".concat(f.q2,"/tx/").concat(t),children:["Check Status on Beaconchain",(0,s.jsx)(i._j,{size:"sm"})]}),(0,s.jsxs)(i.rU,{css:{fontSize:"$4",fontWeight:"$normal"},target:"_blank",href:"https://docs.obol.org/docs/start/quickstart-exit",children:["Learn More",(0,s.jsx)(i.ZJ,{size:"sm"})]})]})},SuccessfullyExited=()=>(0,s.jsx)(i.kC,{direction:"column",css:{gap:"$sm"},children:(0,s.jsx)(TransactionSection,{icon:"successfully",heading:"Cluster is successfully exited"})});var z=a(20479);let K={gap:"$lg",alignItems:"flex-start",justifyContent:"flex-start",gridColumn:"span 1"},ExitClusterSection=e=>{let{clusterStatus:t,handleOnExit:a}=e,l=v(e=>e.claimTXHash);return(0,s.jsxs)(i.W2,{css:K,children:[(0,s.jsx)(z.N,{children:"Exit Cluster"}),"exiting"===t?(0,s.jsx)(ExitLoading,{txHash:l}):"exited"===t?(0,s.jsx)(SuccessfullyExited,{}):(0,s.jsx)(ExitButton,{disabled:"active"!==t,onClick:()=>a()})]})};var Z=a(30120);let ClusterName=e=>{let{clusterDefinition:t}=e;return(0,s.jsxs)(i.kC,{direction:"column",css:{gap:"$xxs"},children:[(0,s.jsx)(i.xv,{variant:"h3",children:null==t?void 0:t.name}),(0,s.jsx)(i.xv,{variant:"metadata",color:"body",children:"Created ".concat(Z.ou.fromISO(null==t?void 0:t.timestamp).toRelativeCalendar()," on ").concat(Z.ou.fromISO(null==t?void 0:t.timestamp).toFormat("yyyy LLL dd"))})]})},ClusterInfoCards=e=>{let{clusterStatus:t,operatorsCount:a,validatorsCount:l,activeValidatorsCount:n}=e;return(0,s.jsxs)(i.kC,{css:{gap:"$lg","@sm":{flexDirection:"column"}},children:[t?(0,s.jsx)(i.gK,{heading:"Cluster Status",status:t,tooltipContent:"The cluster aggregate status"}):(0,s.jsx)(i.gK,{heading:"Cluster Status",content:"Loading...",tooltipContent:"The cluster aggregate status"}),(0,s.jsx)(i.gK,{heading:"Operators",content:a||"0",tooltipContent:"The number of cluster operators"}),null==n?(0,s.jsx)(i.gK,{heading:"Validators",content:l||"0",tooltipContent:"The number of distributed validators in this cluster"}):(0,s.jsx)(i.gK,{heading:"Active Validators",content:l?(0,s.jsxs)(s.Fragment,{children:[n," ",(0,s.jsxs)("span",{style:{color:"#475E64"},children:["/ ",l]})]}):"0",tooltipContent:"The active and total number of distributed validators in this cluster"})]})},OperatorsSection=e=>{var t;let{clusterDefinition:a,connectedAddress:n}=e;return(0,s.jsx)(s.Fragment,{children:(null==a?void 0:null===(t=a.operators)||void 0===t?void 0:t.length)>0&&((0,r.Os)(null==a?void 0:a.operators)?(0,s.jsx)(i.sQ,{heading:"This cluster was not created using a Distributed Key Generation ceremony, and a single entity likely controls the validator private key(s)"}):(0,s.jsx)(l.Dq,{operators:a.operators,connectedAddress:n,creatorAddress:a.creator.address}))})},O={gap:"$lg","@sm":{flexDirection:"column",gap:"$md",alignItems:"flex-start",justifyContent:"flex-start",gridColumn:"span 2"}},ClusterDetailsContainer=e=>{var t;let{clusterDefinition:a,validators:l,connectedAddress:n,clusterStatus:r}=e,o=H().query.lockHash,{activeValidatorsCount:d}=fetchValidatorsStatusMetrics(l);return useClusterValidators({validators:l}),(0,s.jsxs)(F._,{children:[(0,s.jsx)(ClusterName,{clusterDefinition:a}),(0,s.jsx)(ClusterInfoCards,{clusterStatus:r,operatorsCount:null==a?void 0:null===(t=a.operators)||void 0===t?void 0:t.length,validatorsCount:null==l?void 0:l.length,activeValidatorsCount:d}),(0,s.jsx)(OperatorsSection,{clusterDefinition:a,connectedAddress:n}),(0,s.jsx)(ValidatorsTableWrapper,{}),(0,s.jsx)(i.kC,{css:O,children:(0,s.jsx)(ExitClusterSection,{clusterStatus:r,handleOnExit:()=>{H().push({pathname:"/cluster/exit",query:{ctaRouteValue:o}})}})})]})}},32890:function(e,t,a){a.d(t,{X:function(){return ErrorPageContainer}});var s=a(85893);a(67294);var i=a(48900);let ErrorPageContainer=e=>{let{children:t,css:a={}}=e;return(0,s.jsxs)(i.W2,{css:{borderRadius:0,marginTop:"$7xl",...a},children:[(0,s.jsx)(i.xv,{variant:"h4",children:"Error"}),(0,s.jsx)(i.xv,{variant:"body",children:t})]})}},42483:function(e,t,a){a.d(t,{_:function(){return i}});var s=a(48900);let i=(0,s.zo)(s.kC,{flexDirection:"column",width:"auto",gap:"$2xl",px:"10%",py:"$5xl","@sm":{px:"10%",pb:"$5xl",pt:"$xl"}})}}]);